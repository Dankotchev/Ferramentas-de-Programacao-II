<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Tabelas</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="UTF-8"/>
    </h:head>

    <h:body>
        <h1>Usando Tabelas</h1>
        <div>
            <h:form>
<!--                    id="singleDT" 
                    selectionMode="single"
                    selection="#{produtoController.produtoSelecionado}"
                    rowKey="#{produto.id}"-->
                <p:dataTable 
                    var="produto" 
                    value="#{produtoController.listaProduto}"
                    rows="5"
                    paginator="true" 
                    paginatorPosition="top"
                    paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
                    rowsPerPageTemplate="5, 7,{ShowAll|'Todos'}">


                    <f:facet name="header">
                        Tabela de Produtos
                    </f:facet>

                    <p:column headerText="Codigo">
                        <h:outputText value="#{produto.code}"/>
                    </p:column>    

                    <p:column headerText="Nome">
                        <h:outputText value="#{produto.name}"/>
                    </p:column>    

                    <p:column headerText="Descrição">
                        <h:outputText value="#{produto.description}"/>
                    </p:column>    

                    <p:column headerText="Preço">
                        <h:outputText value="#{produto.price}"/>
                    </p:column>    

                    <p:column headerText="Categoria">
                        <h:outputText value="#{produto.category}"/>
                    </p:column>    

                    <p:column headerText="Quantidade">
                        <h:outputText value="#{produto.quantity}"/>
                    </p:column>    

                    <p:column headerText="Avaliação">
                        <h:outputText value="#{produto.rating}"/>
                    </p:column>    

<!--                    <f:facet name="footer">
                        <p:commandButton process="singleDT" update=":form:productDetail" icon="pi pi-search"
                                         value="View"
                                         oncomplete="PF('productDialog').show()"/>
                    </f:facet>-->

                </p:dataTable>





                <p:dialog header="Product Info" widgetVar="productDialog" modal="true" showEffect="fade"
                          hideEffect="fade" resizable="false">
                    <p:outputPanel id="productDetail" style="text-align:center;">
                        <p:column rendered="#{not empty produtoController.produtoSelecionado}">
                            <div class="product">
                                <div class="product-grid-item card" style="margin-bottom: 0">
                                    <div class="product-grid-item-top">
                                        <div>
                                            <i class="pi pi-tag product-category-icon"/>
                                            <span class="product-category">#{produtoController.produtoSelecionado.category}</span>
                                        </div>
                                        <span class="product-badge status-#{produtoController.produtoSelecionado.inventoryStatus.name().toLowerCase()}">#{produtoController.produtoSelecionado.inventoryStatus.text}</span>
                                    </div>
                                    <div class="product-grid-item-content">
                                        <div class="product-name">#{produtoController.produtoSelecionado.name}</div>
                                        <div class="product-description">#{produtoController.produtoSelecionado.description}</div>
                                        <p:rating readonly="true" value="#{produtoController.produtoSelecionado.rating}"/>
                                    </div>
                                    <div class="product-grid-item-bottom">
                                        <h:outputText value="#{produtoController.produtoSelecionado.price}"
                                                      styleClass="product-price">
                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                        </h:outputText>
                                        <p:commandButton value="Add To Cart" icon="pi pi-shopping-cart"
                                                         >
                                            <f:setPropertyActionListener value="#{produtoController.produtoSelecionado}"
                                                                         target="#{produtoController.produtoSelecionado}"/>
                                        </p:commandButton>
                                    </div>
                                </div>
                            </div>
                        </p:column>
                    </p:outputPanel>
                </p:dialog>
            </h:form>

        </div>


    </h:body>

</html>